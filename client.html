<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domain Athletics - My Dashboard</title>
    <meta name="description" content="Domain Athletics Client Dashboard - Track your fitness progress">
    <meta name="theme-color" content="#000000">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiRG9tYWluIEF0aGxldGljcyIsInNob3J0X25hbWUiOiJEb21haW4iLCJzdGFydF91cmwiOiIuLyIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiMwMDAwMDAiLCJ0aGVtZV9jb2xvciI6IiMwMDAwMDAiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M00zUXVjMjVuTDJSdmJXRnBiaTVoZEdoc1pYUnBZM01nYVc1bGVtUnhaeTV2Y21jdFMyRjJieVJuUWpSS1ozSjNZUzVwYnlBaUFDQWlBRUZCWVVGQlFXRkJRVXBoWjI1d2RHQWlJSEJsWlM1amIyMWlhM0Z0Y1hsMGFHVWdOanA2WVdSNGJqa3habUIwSUNGaFd3PT0iLCJzaXplcyI6IjUxMng1MTIiLCJ0eXBlIjoiaW1hZ2Uvc3ZnK3htbCJ9XX0=">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 2px solid #cc3838;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-text {
            color: #ffffff;
            font-size: 1.8rem;
            font-weight: bold;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .welcome-text {
            font-size: 1.1rem;
            color: #ffffff;
        }

        .logout-btn {
            background: #cc3838;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #b83030;
            transform: translateY(-1px);
        }

        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            border-color: #cc3838;
            box-shadow: 0 8px 25px rgba(204, 56, 56, 0.15);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #cc3838;
            display: block;
        }

        .stat-label {
            font-size: 1rem;
            color: #cccccc;
            margin-top: 8px;
            font-weight: 500;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            border-bottom: 1px solid #404040;
            padding-bottom: 0;
            position: relative;
        }

        .nav-tab {
            background: transparent;
            border: none;
            color: #cccccc;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 1rem;
            border-bottom: 3px solid transparent;
            position: relative;
        }

        .nav-tab.active {
            color: #cc3838;
            border-bottom-color: #cc3838;
        }

        .nav-tab:hover {
            color: #ffffff;
            background: rgba(204, 56, 56, 0.1);
        }

        /* Notification badges */
        .nav-tab .badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #cc3838;
            color: white;
            border-radius: 50%;
            width: 12px;
            height: 12px;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
        }

        .nav-tab .badge.show {
            opacity: 1;
            transform: scale(1);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .tab-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
            animation: fadeInUp 0.4s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            border-color: #cc3838;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #404040;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
        }

        /* Today's Focus Widget */
        .todays-focus {
            background: linear-gradient(135deg, #cc3838, #aa2020);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
            color: white;
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(204, 56, 56, 0.3); }
            50% { box-shadow: 0 0 20px rgba(204, 56, 56, 0.6); }
        }

        .focus-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .focus-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .focus-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* Buttons */
        .btn {
            background: #cc3838;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            background: #b83030;
            transform: translateY(-1px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-small {
            padding: 8px 15px;
            font-size: 12px;
        }

        .btn-full {
            width: 100%;
        }

        .btn-secondary {
            background: #404040;
            color: #ffffff;
        }

        .btn-secondary:hover {
            background: #505050;
        }

        .btn-success {
            background: #4CAF50;
        }

        .btn-success:hover {
            background: #45a049;
        }

        .btn-danger {
            background: #f44336;
        }

        .btn-danger:hover {
            background: #da190b;
        }

        /* Quick Add Button */
        .btn-quick-add {
            background: #FFC107;
            color: #000;
            padding: 6px 12px;
            font-size: 11px;
            border-radius: 15px;
            font-weight: 600;
            margin-left: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn-quick-add:hover {
            background: #FFB300;
            transform: scale(1.05);
        }

        .btn-quick-add::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
        }

        .btn-quick-add:active::after {
            width: 100px;
            height: 100px;
        }

        /* Grid Layout */
        .grid {
            display: grid;
            gap: 25px;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        /* Enhanced Workout Layout */
        .workout-layout {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 25px;
            align-items: start;
        }

        .workout-layout.no-session {
            grid-template-columns: 1fr;
        }

        /* Progress Items */
        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .progress-item {
            background: #1f1f1f;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .progress-item:hover {
            border-color: #cc3838;
        }

        .progress-value {
            font-size: 2rem;
            font-weight: bold;
            color: #cc3838;
            display: block;
            margin-bottom: 5px;
        }

        .progress-label {
            font-size: 1rem;
            color: #cccccc;
            margin-bottom: 8px;
        }

        .progress-change {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .progress-change.positive {
            color: #4CAF50;
        }

        .progress-change.negative {
            color: #f44336;
        }

        .progress-change.neutral {
            color: #FFC107;
        }

        /* Grade Display */
        .grade-display {
            text-align: center;
            font-size: 4rem;
            font-weight: bold;
            color: #cc3838;
            margin: 30px 0;
        }

        .grade-breakdown {
            background: #1f1f1f;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .grade-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #404040;
        }

        .grade-item:last-child {
            border-bottom: none;
        }

        /* Progress Photos */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .photo-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            background: #1f1f1f;
            border: 1px solid #404040;
            transition: all 0.3s ease;
        }

        .photo-item:hover {
            border-color: #cc3838;
        }

        .photo-placeholder {
            width: 100%;
            height: 250px;
            background: #1f1f1f;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #666;
        }

        .photo-date {
            padding: 10px;
            text-align: center;
            font-size: 0.9rem;
            color: #cccccc;
            background: rgba(0, 0, 0, 0.5);
        }

        /* Before/After Photo Slider */
        .photo-slider {
            position: relative;
            width: 100%;
            height: 300px;
            overflow: hidden;
            border-radius: 8px;
            background: #1f1f1f;
        }

        .photo-slides {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }

        .photo-slide {
            min-width: 100%;
            position: relative;
        }

        .photo-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-controls {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .photo-control {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-control.active {
            background: #cc3838;
        }

        /* Enhanced Homework Assignment Styles */
        .homework-container {
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .homework-item {
            background: #1f1f1f;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .homework-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: #404040;
            transition: all 0.3s ease;
        }

        .homework-item:hover {
            border-color: #cc3838;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(204, 56, 56, 0.15);
        }

        .homework-item.completed {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
            animation: completeSuccess 0.6s ease-out;
        }

        .homework-item.completed::before {
            background: #4CAF50;
        }

        .homework-item.missed::before {
            background: #f44336;
        }

        .homework-item.missed {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }

        @keyframes completeSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .homework-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .homework-title {
            font-weight: 600;
            color: #ffffff;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .homework-icon {
            font-size: 1.3rem;
        }

        .homework-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        /* Status indicators */
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #404040;
            transition: all 0.3s ease;
            margin-right: 8px;
        }

        .status-dot.green {
            background: #4CAF50;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
        }

        .status-dot.yellow {
            background: #FFC107;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }

        .status-dot.red {
            background: #f44336;
            box-shadow: 0 0 10px rgba(244, 67, 54, 0.5);
        }

        .homework-details {
            color: #cccccc;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .homework-progress {
            font-size: 0.9rem;
            color: #cc3838;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Steps Input Enhancement */
        .steps-input-container {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 10px;
        }

        .steps-input {
            background: #404040;
            border: 1px solid #666;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            width: 120px;
            font-size: 14px;
        }

        .steps-input:focus {
            outline: none;
            border-color: #cc3838;
        }

        /* Today's Workout Container */
        .todays-workout {
            background: #2a2a2a;
            border: 2px solid #cc3838;
            border-radius: 12px;
            padding: 25px;
            max-width: 400px;
            min-width: 350px;
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .workout-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #cc3838;
            margin-bottom: 15px;
            text-align: center;
        }

        .workout-info {
            background: #1f1f1f;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .workout-type {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .workout-time {
            color: #cccccc;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .workout-focus {
            color: #cc3838;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .workout-exercises {
            background: #1f1f1f;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .exercise-item {
            padding: 8px 0;
            border-bottom: 1px solid #404040;
            color: #cccccc;
        }

        .exercise-item:last-child {
            border-bottom: none;
        }

        .exercise-name {
            font-weight: 500;
            color: #ffffff;
        }

        /* Workout History */
        .workout-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .workout-item {
            background: #1f1f1f;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .workout-item:hover {
            border-color: #cc3838;
        }

        .workout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .workout-date {
            font-weight: 600;
            color: #cc3838;
        }

        .workout-type-badge {
            background: rgba(204, 56, 56, 0.2);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            color: #cc3838;
        }

        .workout-details {
            color: #cccccc;
            line-height: 1.4;
        }

        .status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status.completed {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }

        .status.in-progress {
            background: rgba(255, 193, 7, 0.2);
            color: #FFC107;
        }

        .status.behind {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }

        .status.pending {
            background: rgba(158, 158, 158, 0.2);
            color: #9e9e9e;
        }

        /* Nutrition Progress Rings */
        .nutrition-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .macro-ring {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }

        .ring-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #404040;
        }

        .ring-progress {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid transparent;
            border-top-color: #cc3838;
            transition: transform 1s ease-out;
            transform-origin: center;
        }

        .ring-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .macro-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #ffffff;
            display: block;
            margin-bottom: 2px;
        }

        .macro-label {
            font-size: 0.8rem;
            color: #cccccc;
        }

        /* Meal Plan Tabs */
        .meal-plan-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 1px solid #404040;
            padding-bottom: 0;
        }

        .meal-tab {
            background: transparent;
            border: none;
            color: #cccccc;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
            border-bottom: 2px solid transparent;
        }

        .meal-tab.active {
            color: #cc3838;
            border-bottom-color: #cc3838;
        }

        .meal-tab:hover {
            color: #ffffff;
            background: rgba(204, 56, 56, 0.1);
        }

        .meal-options {
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }

        .meal-options.active {
            display: block;
        }

        .meal-option {
            background: #1f1f1f;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .meal-option:hover {
            border-color: #cc3838;
            background: rgba(204, 56, 56, 0.05);
            transform: translateY(-2px);
        }

        .meal-option.favorite {
            border-color: #FFC107;
            background: rgba(255, 193, 7, 0.1);
        }

        .meal-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .meal-ingredients {
            color: #cccccc;
            font-size: 0.9rem;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .meal-macros-detailed {
            display: flex;
            gap: 15px;
            font-size: 0.8rem;
            color: #cc3838;
            flex-wrap: wrap;
            align-items: center;
        }

        .favorite-star {
            color: #FFC107;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .favorite-star:hover {
            transform: scale(1.2);
        }

        /* Calendar */
        .calendar-week {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .calendar-day {
            background: #1f1f1f;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .calendar-day.today {
            border-color: #cc3838;
            background: rgba(204, 56, 56, 0.1);
        }

        .calendar-day.has-session {
            background: rgba(204, 56, 56, 0.2);
            border-color: #cc3838;
        }

        .day-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 5px;
        }

        .day-name {
            font-size: 0.8rem;
            color: #cccccc;
            margin-bottom: 8px;
        }

        .session-indicator {
            font-size: 0.7rem;
            color: #cc3838;
            background: rgba(204, 56, 56, 0.2);
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* Messages */
        .message-thread {
            max-height: 400px;
            overflow-y: auto;
            background: #1f1f1f;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .message-item {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 8px;
            max-width: 80%;
        }

        .message-sent {
            background: rgba(204, 56, 56, 0.2);
            margin-left: auto;
            text-align: right;
        }

        .message-received {
            background: #404040;
            margin-right: auto;
        }

        .message-time {
            font-size: 0.8rem;
            color: #999;
            margin-top: 5px;
        }

        .message-input {
            display: flex;
            gap: 10px;
        }

        .message-input textarea {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #404040;
            border-radius: 6px;
            background: #1f1f1f;
            color: #ffffff;
            resize: vertical;
            min-height: 80px;
        }

        .message-input textarea:focus {
            outline: none;
            border-color: #cc3838;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #2a2a2a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #404040;
        }

        .modal-title {
            font-size: 1.8rem;
            color: #ffffff;
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            color: #cccccc;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: #404040;
            color: #ffffff;
        }

        /* Form Styles */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #ffffff;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #404040;
            border-radius: 6px;
            background: #1f1f1f;
            color: #ffffff;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #cc3838;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* Messages */
        .message {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .message.success {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4CAF50;
            color: #4CAF50;
        }

        .message.error {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #f44336;
            color: #f44336;
        }

        .message.warning {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #FFC107;
            color: #FFC107;
        }

        .message.info {
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid #2196F3;
            color: #2196F3;
        }

        /* Meal Log Styling */
        .meal-log {
            background: #1f1f1f;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .meal-log:hover {
            border-color: #cc3838;
        }

        .meal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .meal-type {
            font-weight: bold;
            color: #cc3838;
        }

        .meal-time {
            font-size: 0.8rem;
            color: #999;
        }

        .meal-content {
            color: #cccccc;
            margin-bottom: 5px;
        }

        .meal-macros {
            display: flex;
            gap: 15px;
            font-size: 0.8rem;
            color: #cc3838;
        }

        /* Meal Action Buttons */
        .meal-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .meal-log:hover .meal-actions {
            opacity: 1;
        }

        .btn-copy {
            background: #2196F3;
            color: white;
            padding: 4px 8px;
            font-size: 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
        }

        .btn-repeat {
            background: #9C27B0;
            color: white;
            padding: 4px 8px;
            font-size: 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
        }

        .btn-delete {
            background: #f44336;
            color: white;
            padding: 4px 8px;
            font-size: 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
        }

        .btn-delete:hover {
            background: #da190b;
        }

        /* Upcoming Sessions */
        .upcoming-sessions {
            margin-top: 20px;
        }

        .upcoming-sessions h4 {
            color: #ffffff;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        /* Achievement Badges */
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .achievement-badge {
            background: #1f1f1f;
            border: 1px solid #404040;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .achievement-badge:hover {
            border-color: #cc3838;
            background: rgba(204, 56, 56, 0.1);
        }

        .achievement-icon {
            font-size: 2rem;
            margin-bottom: 8px;
            display: block;
        }

        .achievement-title {
            font-size: 0.9rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .achievement-desc {
            font-size: 0.8rem;
            color: #cccccc;
        }

        /* Quick Entry Helpers */
        .quick-entry {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .quick-btn {
            background: #404040;
            border: none;
            color: #ffffff;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .quick-btn:hover {
            background: #cc3838;
        }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(204, 56, 56, 0.3);
            border-radius: 50%;
            border-top-color: #cc3838;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #1a1a1a;
            border-bottom: 2px solid #cc3838;
            z-index: 1001;
            padding: 15px 20px;
            justify-content: space-between;
            align-items: center;
        }

        .mobile-nav.active {
            display: flex;
        }

        .mobile-brand {
            color: #ffffff;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .hamburger {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s ease;
            position: relative;
        }

        .hamburger:hover {
            background: rgba(204, 56, 56, 0.2);
        }

        .hamburger .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #cc3838;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
        }

        .hamburger .badge.show {
            opacity: 1;
            transform: scale(1);
        }

        /* Mobile Sidebar */
        .mobile-sidebar {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background: #2a2a2a;
            border-right: 2px solid #cc3838;
            z-index: 1002;
            transition: left 0.3s ease;
            overflow-y: auto;
        }

        .mobile-sidebar.active {
            left: 0;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #404040;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-brand {
            color: #cc3838;
            font-size: 1.3rem;
            font-weight: bold;
        }

        .close-sidebar {
            background: none;
            border: none;
            color: #cccccc;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .close-sidebar:hover {
            background: #404040;
            color: #ffffff;
        }

        .mobile-nav-items {
            padding: 20px 0;
        }

        .mobile-nav-item {
            display: block;
            width: 100%;
            background: none;
            border: none;
            color: #cccccc;
            padding: 15px 20px;
            text-align: left;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .mobile-nav-item:hover {
            background: rgba(204, 56, 56, 0.1);
            color: #ffffff;
        }

        .mobile-nav-item.active {
            background: rgba(204, 56, 56, 0.2);
            color: #cc3838;
            border-left: 4px solid #cc3838;
        }

        .mobile-nav-item .badge {
            position: absolute;
            top: 10px;
            right: 15px;
            background: #cc3838;
            color: white;
            border-radius: 50%;
            width: 12px;
            height: 12px;
            font-size: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0);
            transition: all 0.3s ease;
        }

        .mobile-nav-item .badge.show {
            opacity: 1;
            transform: scale(1);
        }

        /* Mobile Overlay */
        .mobile-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .mobile-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Mobile Content Adjustments */
        .mobile-content {
            padding-top: 0;
            transition: padding-top 0.3s ease;
        }

        .mobile-content.nav-active {
            padding-top: 70px;
        }

        /* Pull to refresh indicator */
        .pull-refresh {
            text-align: center;
            padding: 20px;
            color: #cc3838;
            font-weight: bold;
            opacity: 0;
            transform: translateY(-100%);
            transition: all 0.3s ease;
        }

        .pull-refresh.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Hidden */
        .hidden {
            display: none !important;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            /* Show mobile navigation */
            .mobile-nav {
                display: flex !important;
            }

            .mobile-content {
                padding-top: 70px;
            }

            /* Hide desktop navigation */
            .nav-tabs {
                display: none !important;
            }

            .container {
                padding: 15px;
            }

            .header {
                flex-direction: column;
                text-align: center;
                margin-bottom: 20px;
                padding: 15px 0 20px;
            }

            .brand-text {
                font-size: 1.5rem;
            }

            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-number {
                font-size: 2rem;
            }

            .grid-2,
            .grid-3 {
                grid-template-columns: 1fr;
            }

            .workout-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .todays-workout {
                max-width: 100%;
                min-width: auto;
                order: -1;
            }

            .modal-content {
                margin: 10px;
                padding: 20px;
                max-height: 85vh;
            }

            /* Calendar Mobile Redesign */
            .calendar-week {
                display: flex;
                flex-direction: column;
                gap: 8px;
            }

            .calendar-day {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 15px;
                text-align: left;
                border-radius: 10px;
            }

            .calendar-day-info {
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .day-number {
                font-size: 1.5rem;
                margin-bottom: 0;
                min-width: 30px;
            }

            .day-name {
                font-size: 1rem;
                margin-bottom: 0;
                font-weight: 600;
            }

            .session-indicator {
                font-size: 0.8rem;
                padding: 4px 8px;
                border-radius: 15px;
                white-space: nowrap;
            }

            /* Nutrition Mobile Improvements */
            .nutrition-summary {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .macro-ring {
                width: 100px;
                height: 100px;
            }

            .macro-value {
                font-size: 1.1rem;
            }

            /* Meal Plan Mobile Tabs */
            .meal-plan-tabs {
                display: flex;
                overflow-x: auto;
                gap: 8px;
                padding-bottom: 10px;
                margin-bottom: 20px;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }

            .meal-plan-tabs::-webkit-scrollbar {
                display: none;
            }

            .meal-tab {
                flex-shrink: 0;
                min-width: 120px;
                padding: 10px 15px;
                font-size: 0.85rem;
                text-align: center;
                border-radius: 20px;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid #404040;
            }

            .meal-tab.active {
                background: rgba(204, 56, 56, 0.2);
                border-color: #cc3838;
            }

            /* Touch-Friendly Quick Add Buttons */
            .btn-quick-add {
                padding: 8px 15px;
                font-size: 12px;
                min-height: 36px;
                min-width: 80px;
            }

            /* Homework Items Mobile */
            .homework-actions {
                flex-direction: column;
                gap: 8px;
                align-items: stretch;
            }

            .steps-input {
                width: 100%;
                margin-bottom: 8px;
            }

            /* Message items mobile */
            .message-item {
                max-width: 95%;
            }

            /* Form improvements */
            .form-row {
                grid-template-columns: 1fr;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 15px;
                font-size: 16px; /* Prevents zoom on iOS */
            }

            /* Touch-friendly buttons */
            .btn {
                min-height: 48px;
                padding: 15px 25px;
            }

            .btn-small {
                min-height: 40px;
                padding: 10px 15px;
            }

            /* Progress items mobile stack */
            .progress-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .progress-item {
                padding: 15px;
            }

            .progress-value {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .quick-stats {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
                gap: 5px;
            }

            .nav-tab {
                text-align: center;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .nutrition-summary {
                grid-template-columns: 1fr;
            }

            .message-item {
                max-width: 95%;
            }

            .meal-plan-tabs {
                flex-direction: column;
            }

            .meal-tab {
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="pull-refresh" id="pullRefresh">Pull down to refresh...</div>
    
    <!-- Mobile Navigation -->
    <div class="mobile-nav" id="mobileNav">
        <div class="mobile-brand">DOMAIN ATHLETICS</div>
        <button class="hamburger" id="hamburgerBtn">
            ‚ò∞
            <span class="badge" id="mobileBadge"></span>
        </button>
    </div>

    <!-- Mobile Sidebar -->
    <div class="mobile-sidebar" id="mobileSidebar">
        <div class="sidebar-header">
            <div class="sidebar-brand">DOMAIN ATHLETICS</div>
            <button class="close-sidebar" id="closeSidebar">&times;</button>
        </div>
        <div class="mobile-nav-items">
            <button class="mobile-nav-item active" data-tab="progress" onclick="switchTabMobile('progress')">
                üìà Progress
                <span class="badge" id="mobileProgressBadge"></span>
            </button>
            <button class="mobile-nav-item" data-tab="workouts" onclick="switchTabMobile('workouts')">
                üèãÔ∏è Workouts
                <span class="badge" id="mobileWorkoutsBadge"></span>
            </button>
            <button class="mobile-nav-item" data-tab="nutrition" onclick="switchTabMobile('nutrition')">
                üçé Nutrition
                <span class="badge" id="mobileNutritionBadge"></span>
            </button>
            <button class="mobile-nav-item" data-tab="calendar" onclick="switchTabMobile('calendar')">
                üìÖ Schedule
                <span class="badge" id="mobileCalendarBadge"></span>
            </button>
            <button class="mobile-nav-item" data-tab="messages" onclick="switchTabMobile('messages')">
                üí¨ Messages
                <span class="badge" id="mobileMessagesBadge"></span>
            </button>
        </div>
    </div>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>
    
    <div class="container mobile-content" id="mainContent">
        <!-- Header -->
        <div class="header">
            <div class="logo-section">
                <div class="brand-text">DOMAIN ATHLETICS</div>
            </div>
            <div class="user-info">
                <span class="welcome-text" id="welcomeText">Welcome back!</span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>

        <!-- Today's Focus Widget -->
        <div class="todays-focus" id="todaysFocus">
            <span class="focus-icon">üéØ</span>
            <div class="focus-title">Today's Focus</div>
            <div class="focus-subtitle">Workout Day - Lower Body Session</div>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="stat-card">
                <span class="stat-number" id="sessionsRemaining">8</span>
                <span class="stat-label">Sessions Remaining</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="workoutStreak">12</span>
                <span class="stat-label">Day Streak</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="totalWorkouts">47</span>
                <span class="stat-label">Total Workouts</span>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="monthlyGrade">B+</span>
                <span class="stat-label">Monthly Grade</span>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('progress')" data-tab="progress">
                üìà Progress
                <span class="badge" id="progressBadge"></span>
            </button>
            <button class="nav-tab" onclick="switchTab('workouts')" data-tab="workouts">
                üèãÔ∏è Workouts
                <span class="badge" id="workoutsBadge"></span>
            </button>
            <button class="nav-tab" onclick="switchTab('nutrition')" data-tab="nutrition">
                üçé Nutrition
                <span class="badge" id="nutritionBadge"></span>
            </button>
            <button class="nav-tab" onclick="switchTab('calendar')" data-tab="calendar">
                üìÖ Schedule
                <span class="badge" id="calendarBadge"></span>
            </button>
            <button class="nav-tab" onclick="switchTab('messages')" data-tab="messages">
                üí¨ Messages
                <span class="badge" id="messagesBadge"></span>
            </button>
        </div>

        <!-- Messages Container -->
        <div id="messageContainer"></div>

        <!-- Progress Tab -->
        <div id="progressTab" class="tab-content active">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Weekly Progress</h3>
                        <button class="btn btn-small" onclick="showProgressModal()">Update Data</button>
                    </div>
                    <div class="progress-grid">
                        <div class="progress-item">
                            <span class="progress-value" id="currentWeight">185.2</span>
                            <span class="progress-label">Current Weight (lbs)</span>
                            <span class="progress-change positive" id="weightChange">-2.1 vs last week</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-value" id="weeklySteps">6/7</span>
                            <span class="progress-label">Daily Steps Goals</span>
                            <span class="progress-change positive" id="stepsChange">Auto-tracked</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-value" id="avgCalories">1,950</span>
                            <span class="progress-label">Avg Daily Calories</span>
                            <span class="progress-change neutral" id="caloriesChange">On target</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-value" id="currentMood">üòä</span>
                            <span class="progress-label">Average Weekly Mood</span>
                            <span class="progress-change positive" id="moodChange">8.2/10 this week</span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Monthly Report</h3>
                    </div>
                    <div class="grade-display" id="overallGrade">B+</div>
                    <div class="grade-breakdown" id="gradeBreakdown">
                        <div class="grade-item">
                            <span><strong>Steps:</strong></span>
                            <span id="stepsGrade">A- (85%)</span>
                        </div>
                        <div class="grade-item">
                            <span><strong>Weight:</strong></span>
                            <span id="weightGrade">A (92%)</span>
                        </div>
                        <div class="grade-item">
                            <span><strong>Nutrition:</strong></span>
                            <span id="nutritionGrade">B (78%)</span>
                        </div>
                        <div class="grade-item">
                            <span><strong>Mood:</strong></span>
                            <span id="moodGrade">B+ (88%)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Progress Photos</h3>
                    <button class="btn btn-small" onclick="showPhotoModal()">Add Photo</button>
                </div>
                <div class="photo-grid" id="progressPhotos">
                    <div class="photo-item">
                        <div class="photo-placeholder">üì∑</div>
                        <div class="photo-date">Click "Add Photo" to get started</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Achievements</h3>
                </div>
                <div class="achievement-grid" id="achievementGrid">
                    <div class="achievement-badge">
                        <span class="achievement-icon">üèÜ</span>
                        <div class="achievement-title">First 10 Workouts</div>
                        <div class="achievement-desc">Complete your first 10 sessions</div>
                    </div>
                    <div class="achievement-badge">
                        <span class="achievement-icon">üî•</span>
                        <div class="achievement-title">Week Warrior</div>
                        <div class="achievement-desc">7 day workout streak</div>
                    </div>
                    <div class="achievement-badge">
                        <span class="achievement-icon">üí™</span>
                        <div class="achievement-title">Strength Gains</div>
                        <div class="achievement-desc">25% increase in max lift</div>
                    </div>
                    <div class="achievement-badge">
                        <span class="achievement-icon">üéØ</span>
                        <div class="achievement-title">Goal Crusher</div>
                        <div class="achievement-desc">Hit your monthly target</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Workouts Tab -->
        <div id="workoutsTab" class="tab-content">
            <div class="workout-layout" id="workoutLayout">
                <!-- Main Homework Container -->
                <div class="homework-container">
                    <div class="card-header">
                        <h3 class="card-title">Daily Goals & Habits</h3>
                        <span id="todayDate" class="workout-focus"></span>
                    </div>
                    
                    <div id="homeworkList">
                        <!-- Daily Steps Assignment -->
                        <div class="homework-item" id="homework-steps">
                            <div class="homework-header">
                                <div class="homework-title">
                                    <span class="homework-icon">üö∂</span>
                                    <span class="status-dot green" id="steps-dot"></span>
                                    Daily Steps Goal
                                </div>
                                <div class="homework-actions">
                                    <input type="number" class="steps-input" id="stepsInput" placeholder="10,000" min="0" max="50000">
                                    <button class="btn btn-small btn-success" onclick="markStepsComplete()">Hit Goal!</button>
                                </div>
                            </div>
                            <div class="homework-details">
                                Target: 10,000 steps daily<br>
                                <strong>Goal:</strong> Complete 7/7 days this week
                            </div>
                            <div class="homework-progress" id="steps-progress">
                                <span class="status-dot green"></span>
                                Progress: <span id="steps-completed">6</span>/7 days completed
                            </div>
                        </div>

                        <!-- Hydration Assignment -->
                        <div class="homework-item completed" id="homework-hydration">
                            <div class="homework-header">
                                <div class="homework-title">
                                    <span class="homework-icon">üíß</span>
                                    <span class="status-dot green" id="hydration-dot"></span>
                                    Daily Hydration Goal
                                </div>
                                <div class="homework-actions">
                                    <button class="btn btn-small btn-secondary" disabled>Completed ‚úì</button>
                                </div>
                            </div>
                            <div class="homework-details">
                                Target: 8 glasses of water daily<br>
                                <strong>Goal:</strong> Stay consistently hydrated
                            </div>
                            <div class="homework-progress" id="hydration-progress">
                                <span class="status-dot green"></span>
                                Progress: <span id="hydration-completed">7</span>/7 days completed
                            </div>
                        </div>

                        <!-- Stretching Assignment -->
                        <div class="homework-item" id="homework-stretching">
                            <div class="homework-header">
                                <div class="homework-title">
                                    <span class="homework-icon">üßò</span>
                                    <span class="status-dot yellow" id="stretching-dot"></span>
                                    Morning Stretching Routine
                                </div>
                                <div class="homework-actions">
                                    <button class="btn btn-small btn-success" onclick="markHomeworkComplete('stretching')">Completed Today</button>
                                </div>
                            </div>
                            <div class="homework-details">
                                Target: 10-minute morning stretches<br>
                                <strong>Goal:</strong> Improve flexibility and mobility
                            </div>
                            <div class="homework-progress" id="stretching-progress">
                                <span class="status-dot yellow"></span>
                                Progress: <span id="stretching-completed">5</span>/7 days completed
                            </div>
                        </div>
                    </div>

                    <!-- Today's Scheduled Workout -->
                    <div id="scheduledWorkoutSection">
                        <div style="border-top: 2px solid #cc3838; margin: 20px 0; padding-top: 20px;">
                            <h4 style="color: #cc3838; margin-bottom: 15px;">Today's Scheduled Workout</h4>
                            <div class="workout-item" id="todaysScheduledWorkout">
                                <div class="workout-header">
                                    <span class="workout-date" id="scheduledWorkoutDate">Wednesday, May 29th</span>
                                    <span class="workout-type-badge" id="scheduledWorkoutType">Lower Body</span>
                                </div>
                                <div class="workout-details" id="scheduledWorkoutDetails">
                                    <strong>Time:</strong> 10:00 AM - 11:00 AM<br>
                                    <strong>Focus:</strong> Legs and Glutes<br>
                                    <strong>Location:</strong> Gym - Studio A
                                </div>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-small" onclick="showTodaysWorkout()">View Full Workout</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Today's Workout Detail Panel -->
                <div class="todays-workout" id="todaysWorkoutPanel">
                    <div class="workout-title">Today's Workout</div>
                    
                    <div class="workout-info">
                        <div class="workout-type" id="workoutTypeFull">Lower Body Strength</div>
                        <div class="workout-time" id="workoutTimeFull">10:00 AM - 11:00 AM</div>
                        <div class="workout-focus" id="workoutFocusFull">Focus: Legs, Glutes & Core</div>
                    </div>

                    <div class="workout-exercises">
                        <h4 style="color: #ffffff; margin-bottom: 10px;">Exercises</h4>
                        <div id="workoutExerciseList">
                            <div class="exercise-item">
                                <span class="exercise-name">Squats</span><br>
                                3 sets √ó 12 reps
                            </div>
                            <div class="exercise-item">
                                <span class="exercise-name">Romanian Deadlifts</span><br>
                                3 sets √ó 10 reps
                            </div>
                            <div class="exercise-item">
                                <span class="exercise-name">Walking Lunges</span><br>
                                3 sets √ó 20 steps
                            </div>
                            <div class="exercise-item">
                                <span class="exercise-name">Glute Bridges</span><br>
                                3 sets √ó 15 reps
                            </div>
                            <div class="exercise-item">
                                <span class="exercise-name">Plank Hold</span><br>
                                3 sets √ó 30 seconds
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-full" onclick="markWorkoutComplete()">Mark Workout Complete</button>
                </div>
            </div>
        </div>

        <!-- Nutrition Tab -->
        <div id="nutritionTab" class="tab-content">
            <div class="grid grid-2">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Today's Nutrition</h3>
                        <button class="btn btn-small" onclick="showNutritionModal()">Log Food</button>
                    </div>
                    <div class="nutrition-summary">
                        <div class="macro-item">
                            <div class="macro-ring">
                                <div class="ring-background"></div>
                                <div class="ring-progress" id="caloriesRing" data-progress="82"></div>
                                <div class="ring-content">
                                    <span class="macro-value" id="todayCalories">1,650</span>
                                    <span class="macro-label">Calories</span>
                                </div>
                            </div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-ring">
                                <div class="ring-background"></div>
                                <div class="ring-progress" id="proteinRing" data-progress="89"></div>
                                <div class="ring-content">
                                    <span class="macro-value" id="todayProtein">125g</span>
                                    <span class="macro-label">Protein</span>
                                </div>
                            </div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-ring">
                                <div class="ring-background"></div>
                                <div class="ring-progress" id="carbsRing" data-progress="70"></div>
                                <div class="ring-content">
                                    <span class="macro-value" id="todayCarbs">140g</span>
                                    <span class="macro-label">Carbs</span>
                                </div>
                            </div>
                        </div>
                        <div class="macro-item">
                            <div class="macro-ring">
                                <div class="ring-background"></div>
                                <div class="ring-progress" id="fatsRing" data-progress="74"></div>
                                <div class="ring-content">
                                    <span class="macro-value" id="todayFats">52g</span>
                                    <span class="macro-label">Fats</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="todayMeals">
                        <div class="meal-log">
                            <div class="meal-header">
                                <span class="meal-type">Breakfast</span>
                                <span class="meal-time">8:30 AM</span>
                            </div>
                            <div class="meal-content">Oatmeal with berries and protein powder</div>
                            <div class="meal-macros">
                                <span>350 cal</span>
                                <span>25g protein</span>
                                <span>45g carbs</span>
                                <span>8g fat</span>
                            </div>
                            <div class="meal-actions">
                                <button class="btn-copy" onclick="copyMealToTomorrow(this)">Copy ‚Üí</button>
                                <button class="btn-repeat" onclick="repeatMeal(this)">Repeat</button>
                                <button class="btn-delete" onclick="deleteMeal(this)">Delete</button>
                            </div>
                        </div>
                        <div class="meal-log">
                            <div class="meal-header">
                                <span class="meal-type">Lunch</span>
                                <span class="meal-time">12:45 PM</span>
                            </div>
                            <div class="meal-content">Grilled chicken salad with quinoa</div>
                            <div class="meal-macros">
                                <span>420 cal</span>
                                <span>35g protein</span>
                                <span>32g carbs</span>
                                <span>18g fat</span>
                            </div>
                            <div class="meal-actions">
                                <button class="btn-copy" onclick="copyMealToTomorrow(this)">Copy ‚Üí</button>
                                <button class="btn-repeat" onclick="repeatMeal(this)">Repeat</button>
                                <button class="btn-delete" onclick="deleteMeal(this)">Delete</button>
                            </div>
                        </div>
                        <div class="meal-log">
                            <div class="meal-header">
                                <span class="meal-type">Snack</span>
                                <span class="meal-time">3:15 PM</span>
                            </div>
                            <div class="meal-content">Greek yogurt with almonds</div>
                            <div class="meal-macros">
                                <span>180 cal</span>
                                <span>15g protein</span>
                                <span>12g carbs</span>
                                <span>8g fat</span>
                            </div>
                            <div class="meal-actions">
                                <button class="btn-copy" onclick="copyMealToTomorrow(this)">Copy ‚Üí</button>
                                <button class="btn-repeat" onclick="repeatMeal(this)">Repeat</button>
                                <button class="btn-delete" onclick="deleteMeal(this)">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Meal Plans with Quick Add -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Meal Plans</h3>
                    </div>
                    
                    <!-- Meal Plan Category Tabs -->
                    <div class="meal-plan-tabs">
                        <button class="meal-tab active" onclick="switchMealTab('breakfast')" data-meal="breakfast">ü•û Breakfast</button>
                        <button class="meal-tab" onclick="switchMealTab('lunch')" data-meal="lunch">ü•ó Lunch</button>
                        <button class="meal-tab" onclick="switchMealTab('dinner')" data-meal="dinner">üçΩÔ∏è Dinner</button>
                        <button class="meal-tab" onclick="switchMealTab('snacks')" data-meal="snacks">ü•ú Snacks</button>
                    </div>

                    <!-- Breakfast Options -->
                    <div class="meal-options active" id="breakfastOptions">
                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Power Oatmeal Bowl","calories":420,"protein":28,"carbs":52,"fats":12}'>
                            <div class="meal-name">
                                Power Oatmeal Bowl
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">1 cup rolled oats, ¬Ω cup blueberries, 1 scoop whey protein, 1 tbsp almond butter, 1 tsp honey</div>
                            <div class="meal-macros-detailed">
                                <span>420 cal</span>
                                <span>28g protein</span>
                                <span>52g carbs</span>
                                <span>12g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Protein Pancakes","calories":380,"protein":32,"carbs":38,"fats":8}'>
                            <div class="meal-name">
                                Protein Pancakes
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">2 eggs, 1 banana, ¬Ω cup oats, 1 scoop protein powder, ¬º cup berries</div>
                            <div class="meal-macros-detailed">
                                <span>380 cal</span>
                                <span>32g protein</span>
                                <span>38g carbs</span>
                                <span>8g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Avocado Toast with Eggs","calories":480,"protein":20,"carbs":35,"fats":28}'>
                            <div class="meal-name">
                                Avocado Toast with Eggs
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">2 slices whole grain bread, 1 avocado, 2 eggs, 1 tbsp olive oil, salt & pepper</div>
                            <div class="meal-macros-detailed">
                                <span>480 cal</span>
                                <span>20g protein</span>
                                <span>35g carbs</span>
                                <span>28g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Greek Yogurt Parfait","calories":320,"protein":22,"carbs":45,"fats":6}'>
                            <div class="meal-name">
                                Greek Yogurt Parfait
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">1 cup Greek yogurt, ¬Ω cup granola, ¬º cup mixed berries, 1 tbsp honey</div>
                            <div class="meal-macros-detailed">
                                <span>320 cal</span>
                                <span>22g protein</span>
                                <span>45g carbs</span>
                                <span>6g fat</span>
                            </div>
                        </div>
                    </div>

                    <!-- Lunch Options -->
                    <div class="meal-options" id="lunchOptions">
                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Grilled Chicken Quinoa Bowl","calories":520,"protein":45,"carbs":42,"fats":18}'>
                            <div class="meal-name">
                                Grilled Chicken Quinoa Bowl
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">6 oz grilled chicken breast, 1 cup cooked quinoa, 2 cups mixed vegetables, 2 tbsp olive oil</div>
                            <div class="meal-macros-detailed">
                                <span>520 cal</span>
                                <span>45g protein</span>
                                <span>42g carbs</span>
                                <span>18g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Turkey & Avocado Wrap","calories":450,"protein":35,"carbs":35,"fats":20}'>
                            <div class="meal-name">
                                Turkey & Avocado Wrap
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">8" whole wheat tortilla, 4 oz turkey breast, ¬Ω avocado, 2 cups lettuce, 1 tbsp hummus</div>
                            <div class="meal-macros-detailed">
                                <span>450 cal</span>
                                <span>35g protein</span>
                                <span>35g carbs</span>
                                <span>20g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Salmon Rice Bowl","calories":580,"protein":40,"carbs":48,"fats":22}'>
                            <div class="meal-name">
                                Salmon Rice Bowl
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">5 oz baked salmon, 1 cup brown rice, 1 cup steamed broccoli, 1 tbsp sesame oil</div>
                            <div class="meal-macros-detailed">
                                <span>580 cal</span>
                                <span>40g protein</span>
                                <span>48g carbs</span>
                                <span>22g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Mediterranean Salad","calories":420,"protein":32,"carbs":15,"fats":28}'>
                            <div class="meal-name">
                                Mediterranean Salad
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">3 cups mixed greens, 4 oz grilled chicken, ¬º cup feta cheese, 2 tbsp olive oil, olives</div>
                            <div class="meal-macros-detailed">
                                <span>420 cal</span>
                                <span>32g protein</span>
                                <span>15g carbs</span>
                                <span>28g fat</span>
                            </div>
                        </div>
                    </div>

                    <!-- Dinner Options -->
                    <div class="meal-options" id="dinnerOptions">
                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Lean Beef Stir Fry","calories":620,"protein":48,"carbs":52,"fats":22}'>
                            <div class="meal-name">
                                Lean Beef Stir Fry
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">6 oz lean beef strips, 2 cups mixed vegetables, 1 cup brown rice, 1 tbsp coconut oil</div>
                            <div class="meal-macros-detailed">
                                <span>620 cal</span>
                                <span>48g protein</span>
                                <span>52g carbs</span>
                                <span>22g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Baked Cod with Sweet Potato","calories":480,"protein":42,"carbs":38,"fats":14}'>
                            <div class="meal-name">
                                Baked Cod with Sweet Potato
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">6 oz baked cod, 1 large roasted sweet potato, 2 cups asparagus, 1 tbsp olive oil</div>
                            <div class="meal-macros-detailed">
                                <span>480 cal</span>
                                <span>42g protein</span>
                                <span>38g carbs</span>
                                <span>14g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Chicken & Vegetable Pasta","calories":540,"protein":45,"carbs":55,"fats":12}'>
                            <div class="meal-name">
                                Chicken & Vegetable Pasta
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">5 oz grilled chicken, 2 oz whole wheat pasta, 2 cups mixed vegetables, 2 tbsp marinara sauce</div>
                            <div class="meal-macros-detailed">
                                <span>540 cal</span>
                                <span>45g protein</span>
                                <span>55g carbs</span>
                                <span>12g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Turkey Meatballs with Quinoa","calories":520,"protein":38,"carbs":45,"fats":18}'>
                            <div class="meal-name">
                                Turkey Meatballs with Quinoa
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">6 turkey meatballs (4 oz), 1 cup cooked quinoa, 2 cups steamed vegetables, 1 tbsp olive oil</div>
                            <div class="meal-macros-detailed">
                                <span>520 cal</span>
                                <span>38g protein</span>
                                <span>45g carbs</span>
                                <span>18g fat</span>
                            </div>
                        </div>
                    </div>

                    <!-- Snack Options -->
                    <div class="meal-options" id="snacksOptions">
                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Protein Smoothie","calories":280,"protein":28,"carbs":18,"fats":12}'>
                            <div class="meal-name">
                                Protein Smoothie
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">1 scoop whey protein, 1 cup almond milk, ¬Ω banana, 1 tbsp peanut butter, ice</div>
                            <div class="meal-macros-detailed">
                                <span>280 cal</span>
                                <span>28g protein</span>
                                <span>18g carbs</span>
                                <span>12g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Greek Yogurt with Almonds","calories":220,"protein":18,"carbs":12,"fats":12}'>
                            <div class="meal-name">
                                Greek Yogurt with Almonds
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">1 cup Greek yogurt, ¬º cup almonds, 1 tsp honey</div>
                            <div class="meal-macros-detailed">
                                <span>220 cal</span>
                                <span>18g protein</span>
                                <span>12g carbs</span>
                                <span>12g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Apple with Peanut Butter","calories":280,"protein":8,"carbs":32,"fats":16}'>
                            <div class="meal-name">
                                Apple with Peanut Butter
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">1 medium apple, 2 tbsp natural peanut butter</div>
                            <div class="meal-macros-detailed">
                                <span>280 cal</span>
                                <span>8g protein</span>
                                <span>32g carbs</span>
                                <span>16g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Cottage Cheese Bowl","calories":240,"protein":22,"carbs":25,"fats":6}'>
                            <div class="meal-name">
                                Cottage Cheese Bowl
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">1 cup cottage cheese, ¬º cup berries, 1 tbsp granola, 1 tsp honey</div>
                            <div class="meal-macros-detailed">
                                <span>240 cal</span>
                                <span>22g protein</span>
                                <span>25g carbs</span>
                                <span>6g fat</span>
                            </div>
                        </div>

                        <div class="meal-option" onclick="toggleFavorite(this)" data-meal='{"name":"Protein Bar","calories":180,"protein":20,"carbs":15,"fats":6}'>
                            <div class="meal-name">
                                Protein Bar
                                <div>
                                    <span class="favorite-star">‚òÜ</span>
                                    <button class="btn-quick-add" onclick="quickAddMeal(this, event)">Quick Add</button>
                                </div>
                            </div>
                            <div class="meal-ingredients">1 protein bar (Quest or similar brand)</div>
                            <div class="meal-macros-detailed">
                                <span>180 cal</span>
                                <span>20g protein</span>
                                <span>15g carbs</span>
                                <span>6g fat</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div id="calendarTab" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">This Week's Schedule</h3>
                </div>
                <div class="calendar-week" id="weeklyCalendar">
                        <div class="calendar-day">
                            <div class="calendar-day-info">
                                <div class="day-number">26</div>
                                <div class="day-name">Sunday</div>
                            </div>
                        </div>
                        <div class="calendar-day has-session">
                            <div class="calendar-day-info">
                                <div class="day-number">27</div>
                                <div class="day-name">Monday</div>
                            </div>
                            <div class="session-indicator">Upper Body</div>
                        </div>
                        <div class="calendar-day today">
                            <div class="calendar-day-info">
                                <div class="day-number">28</div>
                                <div class="day-name">Tuesday</div>
                            </div>
                        </div>
                        <div class="calendar-day has-session">
                            <div class="calendar-day-info">
                                <div class="day-number">29</div>
                                <div class="day-name">Wednesday</div>
                            </div>
                            <div class="session-indicator">Lower Body</div>
                        </div>
                        <div class="calendar-day">
                            <div class="calendar-day-info">
                                <div class="day-number">30</div>
                                <div class="day-name">Thursday</div>
                            </div>
                        </div>
                        <div class="calendar-day has-session">
                            <div class="calendar-day-info">
                                <div class="day-number">31</div>
                                <div class="day-name">Friday</div>
                            </div>
                            <div class="session-indicator">Full Body</div>
                        </div>
                        <div class="calendar-day">
                            <div class="calendar-day-info">
                                <div class="day-number">1</div>
                                <div class="day-name">Saturday</div>
                            </div>
                        </div>
                </div>
                <div class="upcoming-sessions">
                    <h4>Upcoming Sessions</h4>
                    <div id="upcomingSessions">
                        <div class="workout-item">
                            <div class="workout-header">
                                <span class="workout-date">Wednesday, May 29th</span>
                                <span class="workout-type-badge">Lower Body</span>
                            </div>
                            <div class="workout-details">10:00 AM - 11:00 AM<br>Focus: Legs and Glutes</div>
                        </div>
                        <div class="workout-item">
                            <div class="workout-header">
                                <span class="workout-date">Friday, May 31st</span>
                                <span class="workout-type-badge">Full Body</span>
                            </div>
                            <div class="workout-details">10:00 AM - 11:00 AM<br>Focus: HIIT Training</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Messages Tab -->
        <div id="messagesTab" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Messages with Coach</h3>
                </div>
                <div class="message-thread" id="messageThread">
                    <div class="message-item message-received">
                        <div class="meal-content">Welcome to Domain Athletics! I'm excited to work with you on your fitness journey. Feel free to message me anytime with questions!</div>
                        <div class="message-time">Coach Mike ‚Ä¢ Today 9:15 AM</div>
                    </div>
                    <div class="message-item message-sent">
                        <div class="meal-content">Thanks! Had a great workout yesterday. Really feeling the difference already.</div>
                        <div class="message-time">You ‚Ä¢ Today 2:30 PM</div>
                    </div>
                    <div class="message-item message-received">
                        <div class="meal-content">That's fantastic! Keep up the great work. Remember to update your weekly check-in data on Friday.</div>
                        <div class="message-time">Coach Mike ‚Ä¢ Today 3:45 PM</div>
                    </div>
                </div>
                <div class="message-input">
                    <textarea id="newMessage" placeholder="Type your message to your coach..." rows="3"></textarea>
                    <button class="btn" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Update Modal -->
    <div id="progressModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Weekly Progress</h3>
                <button class="close-modal" onclick="closeModal('progressModal')">&times;</button>
            </div>
            <form id="progressForm">
                <div class="form-row">
                    <div class="form-group">
                        <label>Weight (lbs)</label>
                        <input type="number" id="progressWeight" step="0.1" placeholder="Enter your weight">
                        <div class="quick-entry">
                            <span style="font-size: 0.9rem; color: #cccccc;">Last: <span id="lastWeight">187.3</span> lbs</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Steps Goal Achievement</label>
                        <input type="number" id="progressSteps" placeholder="Steps completed this week">
                        <div class="quick-entry">
                            <button type="button" class="quick-btn" onclick="setSteps(50000)">Met Goal</button>
                            <button type="button" class="quick-btn" onclick="setSteps(40000)">Close</button>
                            <button type="button" class="quick-btn" onclick="setSteps(30000)">Halfway</button>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Average Daily Calories</label>
                        <input type="number" id="progressCalories" placeholder="Average calories consumed">
                        <div class="quick-entry">
                            <button type="button" class="quick-btn" onclick="setCalories(1800)">1800</button>
                            <button type="button" class="quick-btn" onclick="setCalories(2000)">2000</button>
                            <button type="button" class="quick-btn" onclick="setCalories(2200)">2200</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Mood (1-10)</label>
                        <input type="number" id="progressMood" min="1" max="10" placeholder="Average mood this week">
                        <div class="quick-entry">
                            <button type="button" class="quick-btn" onclick="setMood(8)">Great üòä</button>
                            <button type="button" class="quick-btn" onclick="setMood(6)">Good üòê</button>
                            <button type="button" class="quick-btn" onclick="setMood(4)">Tough üòî</button>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>RPE - How Hard Was This Week? (1-10)</label>
                    <input type="number" id="progressRPE" min="1" max="10" placeholder="Rate of Perceived Exertion">
                    <div class="quick-entry">
                        <button type="button" class="quick-btn" onclick="setRPE(3)">Easy</button>
                        <button type="button" class="quick-btn" onclick="setRPE(6)">Moderate</button>
                        <button type="button" class="quick-btn" onclick="setRPE(9)">Very Hard</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Pain/Soreness Areas</label>
                    <textarea id="progressPain" rows="2" placeholder="Any areas of pain or soreness this week?"></textarea>
                </div>
                <button type="submit" class="btn btn-full">Update Progress</button>
            </form>
        </div>
    </div>

    <!-- Nutrition Modal -->
    <div id="nutritionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Log Food</h3>
                <button class="close-modal" onclick="closeModal('nutritionModal')">&times;</button>
            </div>
            <form id="nutritionForm">
                <div class="form-group">
                    <label>Meal Type</label>
                    <select id="mealType">
                        <option value="breakfast">Breakfast</option>
                        <option value="lunch">Lunch</option>
                        <option value="dinner">Dinner</option>
                        <option value="snack">Snack</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Food Description</label>
                    <input type="text" id="foodDescription" placeholder="e.g., Grilled chicken breast with rice" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Calories</label>
                        <input type="number" id="foodCalories" placeholder="Calories" required>
                    </div>
                    <div class="form-group">
                        <label>Protein (g)</label>
                        <input type="number" id="foodProtein" placeholder="Protein in grams">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Carbs (g)</label>
                        <input type="number" id="foodCarbs" placeholder="Carbs in grams">
                    </div>
                    <div class="form-group">
                        <label>Fats (g)</label>
                        <input type="number" id="foodFats" placeholder="Fats in grams">
                    </div>
                </div>
                <button type="submit" class="btn btn-full">Log Food</button>
            </form>
        </div>
    </div>

    <!-- Photo Modal -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Progress Photo</h3>
                <button class="close-modal" onclick="closeModal('photoModal')">&times;</button>
            </div>
            <div class="form-group">
                <label>Select Photo</label>
                <input type="file" id="photoInput" accept="image/*" style="width: 100%; padding: 15px; border: 2px dashed #404040; border-radius: 8px; text-align: center; background: #1f1f1f; color: #ffffff;">
            </div>
            <div class="form-group">
                <label>Photo Notes (Optional)</label>
                <textarea id="photoNotes" rows="3" placeholder="Any notes about this progress photo..."></textarea>
            </div>
            <button class="btn btn-full" onclick="uploadPhoto()">Add Photo</button>
        </div>
    </div>

    <script>
        // Enhanced App State with new data structures
        let currentUser = null;
        let clientData = null;
        let appData = {
            progressData: [],
            nutritionLogs: [],
            messages: [],
            photos: [],
            homework: {
                steps: { completed: 6, status: 'pending', todaySteps: 0 },
                hydration: { completed: 7, status: 'completed' },
                stretching: { completed: 5, status: 'pending' }
            },
            favorites: [],
            dailyNutrition: {
                calories: 1650,
                protein: 125,
                carbs: 140,
                fats: 52,
                targets: {
                    calories: 2000,
                    protein: 140,
                    carbs: 200,
                    fats: 70
                }
            },
            weeklyMoodData: [8, 7, 9, 8, 8, 7, 8], // Daily mood scores
            lastWeekWeight: 187.3
        };

        // Schedule and workout data
        let scheduleData = {
            today: 'Wednesday',
            workouts: {
                'Monday': { type: 'Upper Body', time: '10:00 AM - 11:00 AM', focus: 'Chest, Back & Arms' },
                'Wednesday': { type: 'Lower Body', time: '10:00 AM - 11:00 AM', focus: 'Legs, Glutes & Core' },
                'Friday': { type: 'Full Body', time: '10:00 AM - 11:00 AM', focus: 'HIIT Training' }
            }
        };

        // Touch and swipe handling variables
        let touchStartY = 0;
        let touchEndY = 0;
        let isPullingToRefresh = false;

        // Initialize Enhanced App
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Domain Athletics Client Dashboard - Initializing...');
            
            checkAuthentication();
            loadAppData();
            setupEventListeners();
            setupTouchHandlers();
            setupMobileNavigation();
            loadClientDashboard();
            initializePeriodicChecks();
            checkTodaysWorkout();
            updateTodaysFocus();
            initializeProgressRings();
            showNotificationBadges();
        });

        // Mobile Navigation Setup
        function setupMobileNavigation() {
            const hamburgerBtn = document.getElementById('hamburgerBtn');
            const mobileSidebar = document.getElementById('mobileSidebar');
            const mobileOverlay = document.getElementById('mobileOverlay');
            const closeSidebar = document.getElementById('closeSidebar');
            const mainContent = document.getElementById('mainContent');

            // Hamburger click
            hamburgerBtn.addEventListener('click', function() {
                mobileSidebar.classList.add('active');
                mobileOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            });

            // Close sidebar
            function closeMobileSidebar() {
                mobileSidebar.classList.remove('active');
                mobileOverlay.classList.remove('active');
                document.body.style.overflow = '';
            }

            closeSidebar.addEventListener('click', closeMobileSidebar);
            mobileOverlay.addEventListener('click', closeMobileSidebar);

            // Close on escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && mobileSidebar.classList.contains('active')) {
                    closeMobileSidebar();
                }
            });

            // Sync mobile badges with desktop badges
            syncMobileBadges();
        }

        function switchTabMobile(tabName) {
            // Close mobile sidebar
            document.getElementById('mobileSidebar').classList.remove('active');
            document.getElementById('mobileOverlay').classList.remove('active');
            document.body.style.overflow = '';

            // Update mobile nav active state
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Use existing tab switching logic
            switchTab(tabName);
        }

        function syncMobileBadges() {
            // Sync individual badges
            const badgeMap = {
                'progressBadge': 'mobileProgressBadge',
                'workoutsBadge': 'mobileWorkoutsBadge', 
                'nutritionBadge': 'mobileNutritionBadge',
                'calendarBadge': 'mobileCalendarBadge',
                'messagesBadge': 'mobileMessagesBadge'
            };

            Object.entries(badgeMap).forEach(([desktopId, mobileId]) => {
                const desktopBadge = document.getElementById(desktopId);
                const mobileBadge = document.getElementById(mobileId);
                
                if (desktopBadge.classList.contains('show')) {
                    mobileBadge.classList.add('show');
                } else {
                    mobileBadge.classList.remove('show');
                }
            });

            // Show main mobile badge if any individual badge is active
            const mobileBadge = document.getElementById('mobileBadge');
            const anyBadgeActive = Object.keys(badgeMap).some(id => 
                document.getElementById(id).classList.contains('show')
            );

            if (anyBadgeActive) {
                mobileBadge.classList.add('show');
            } else {
                mobileBadge.classList.remove('show');
            }
        }

        function checkAuthentication() {
            currentUser = {
                username: 'demo_client',
                name: 'Demo Client',
                role: 'client'
            };
            console.log('Created demo user for testing');
            document.getElementById('welcomeText').textContent = `Welcome back, ${currentUser.name.split(' ')[0]}!`;
        }

        function loadAppData() {
            console.log('Creating sample data for demo');
            clientData = createSampleClientData();
            
            appData.progressData = clientData.progressHistory || [];
            appData.nutritionLogs = clientData.nutrition || [];
            appData.messages = [];
            appData.photos = clientData.progress?.photos || [];
            
            console.log('App data loaded successfully');
            showMessage('Welcome to Domain Athletics! This is demo data with full features.', 'info');
        }

        function createSampleClientData() {
            return {
                id: currentUser.username,
                name: currentUser.name,
                sessionsRemaining: 8,
                progress: {
                    streak: 12,
                    workouts: 47,
                    weight: [appData.lastWeekWeight, 185.2],
                    photos: []
                },
                progressHistory: [],
                nutrition: []
            };
        }

        // Touch handlers for mobile experience
        function setupTouchHandlers() {
            const container = document.querySelector('.container');
            
            container.addEventListener('touchstart', function(e) {
                touchStartY = e.touches[0].clientY;
            }, { passive: true });

            container.addEventListener('touchmove', function(e) {
                touchEndY = e.touches[0].clientY;
                const pullDistance = touchEndY - touchStartY;
                
                if (pullDistance > 50 && window.scrollY === 0 && !isPullingToRefresh) {
                    isPullingToRefresh = true;
                    document.getElementById('pullRefresh').classList.add('active');
                }
            }, { passive: true });

            container.addEventListener('touchend', function(e) {
                if (isPullingToRefresh) {
                    performPullToRefresh();
                    isPullingToRefresh = false;
                    document.getElementById('pullRefresh').classList.remove('active');
                }
                touchStartY = 0;
                touchEndY = 0;
            }, { passive: true });
        }

        function performPullToRefresh() {
            showMessage('Refreshing data...', 'info');
            
            // Simulate data refresh
            setTimeout(() => {
                updateDailyNutrition();
                updateHomeworkProgress();
                updateQuickStats();
                showMessage('Data refreshed!', 'success');
            }, 1000);
        }

        // Today's Focus Widget
        function updateTodaysFocus() {
            const today = scheduleData.today;
            const todaysWorkout = scheduleData.workouts[today];
            const focusWidget = document.getElementById('todaysFocus');
            
            if (todaysWorkout) {
                focusWidget.innerHTML = `
                    <span class="focus-icon">üèãÔ∏è</span>
                    <div class="focus-title">Workout Day</div>
                    <div class="focus-subtitle">${todaysWorkout.type} Session</div>
                `;
            } else {
                // Check if it's Friday (check-in day)
                const dayOfWeek = new Date().getDay();
                if (dayOfWeek === 5) {
                    focusWidget.innerHTML = `
                        <span class="focus-icon">üìä</span>
                        <div class="focus-title">Check-in Day</div>
                        <div class="focus-subtitle">Update your weekly progress</div>
                    `;
                } else {
                    focusWidget.innerHTML = `
                        <span class="focus-icon">üßò</span>
                        <div class="focus-title">Recovery Day</div>
                        <div class="focus-subtitle">Focus on daily habits & rest</div>
                    `;
                }
            }
        }

        // Notification badges
        function showNotificationBadges() {
            // Show badge on workouts if daily goals need attention
            const pendingGoals = Object.values(appData.homework).filter(h => h.status === 'pending').length;
            if (pendingGoals > 0) {
                document.getElementById('workoutsBadge').classList.add('show');
            }

            // Show badge on progress if it's Friday
            const dayOfWeek = new Date().getDay();
            if (dayOfWeek === 5) {
                document.getElementById('progressBadge').classList.add('show');
            }

            // Show badge on nutrition if calories are low
            if (appData.dailyNutrition.calories < 1200) {
                document.getElementById('nutritionBadge').classList.add('show');
            }

            // Sync mobile badges
            if (typeof syncMobileBadges === 'function') {
                syncMobileBadges();
            }
        }

        // Progress rings initialization
        function initializeProgressRings() {
            setTimeout(() => {
                updateProgressRing('caloriesRing', 82);
                updateProgressRing('proteinRing', 89);
                updateProgressRing('carbsRing', 70);
                updateProgressRing('fatsRing', 74);
            }, 500);
        }

        function updateProgressRing(ringId, percentage) {
            const ring = document.getElementById(ringId);
            const rotation = (percentage / 100) * 360;
            ring.style.transform = `rotate(${rotation}deg)`;
        }

        function setupEventListeners() {
            const progressForm = document.getElementById('progressForm');
            const nutritionForm = document.getElementById('nutritionForm');
            
            if (progressForm) {
                progressForm.addEventListener('submit', handleProgressUpdate);
            }
            
            if (nutritionForm) {
                nutritionForm.addEventListener('submit', handleNutritionLog);
            }

            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });

            const photoInput = document.getElementById('photoInput');
            if (photoInput) {
                photoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        console.log('Photo selected for upload');
                    }
                });
            }

            // Steps input real-time validation
            const stepsInput = document.getElementById('stepsInput');
            if (stepsInput) {
                stepsInput.addEventListener('input', function(e) {
                    const value = parseInt(e.target.value) || 0;
                    if (value >= 10000) {
                        e.target.style.borderColor = '#4CAF50';
                    } else {
                        e.target.style.borderColor = '#666';
                    }
                });
            }
        }

        function loadClientDashboard() {
            updateQuickStats();
            loadProgressData();
            loadNutritionData();
            loadWeeklyCalendar();
            loadMessages();
            updateLastWeight();
            loadHomeworkAssignments();
            updateTodayDate();
        }

        // Enhanced homework assignment functions
        function loadHomeworkAssignments() {
            updateHomeworkProgress();
            updateStatusDots();
        }

        function updateHomeworkProgress() {
            document.getElementById('steps-completed').textContent = appData.homework.steps.completed;
            document.getElementById('hydration-completed').textContent = appData.homework.hydration.completed;
            document.getElementById('stretching-completed').textContent = appData.homework.stretching.completed;

            updateHomeworkStatus('steps', appData.homework.steps.status);
            updateHomeworkStatus('hydration', appData.homework.hydration.status);
            updateHomeworkStatus('stretching', appData.homework.stretching.status);
        }

        function updateStatusDots() {
            updateStatusDot('steps-dot', appData.homework.steps.status);
            updateStatusDot('hydration-dot', appData.homework.hydration.status);
            updateStatusDot('stretching-dot', appData.homework.stretching.status);
        }

        function updateStatusDot(dotId, status) {
            const dot = document.getElementById(dotId);
            dot.className = 'status-dot';
            
            switch(status) {
                case 'completed':
                    dot.classList.add('green');
                    break;
                case 'pending':
                    dot.classList.add('yellow');
                    break;
                case 'missed':
                    dot.classList.add('red');
                    break;
            }
        }

        function updateHomeworkStatus(type, status) {
            const homeworkItem = document.getElementById(`homework-${type}`);
            homeworkItem.className = `homework-item ${status}`;
        }

        // Enhanced steps completion with input
        function markStepsComplete() {
            const stepsInput = document.getElementById('stepsInput');
            const enteredSteps = parseInt(stepsInput.value) || 0;
            
            if (enteredSteps < 10000) {
                showMessage('Goal is 10,000 steps. Keep going!', 'warning');
                return;
            }

            if (appData.homework.steps.status === 'completed') {
                showMessage('Steps already completed today!', 'warning');
                return;
            }

            appData.homework.steps.completed += 1;
            appData.homework.steps.status = 'completed';
            appData.homework.steps.todaySteps = enteredSteps;
            
            updateHomeworkProgress();
            updateStatusDots();
            updateProgressFromHomework(); // Auto-sync to progress tab
            
            showMessage(`Great job! ${enteredSteps.toLocaleString()} steps logged!`, 'success');

            const button = document.querySelector('#homework-steps .btn-success');
            button.textContent = 'Completed ‚úì';
            button.className = 'btn btn-small btn-secondary';
            button.disabled = true;
            
            stepsInput.value = '';
            stepsInput.style.borderColor = '#4CAF50';

            // Remove notification badge
            document.getElementById('workoutsBadge').classList.remove('show');
            
            // Sync mobile badges
            if (typeof syncMobileBadges === 'function') {
                syncMobileBadges();
            }
        }

        function markHomeworkComplete(type) {
            if (appData.homework[type].status === 'completed') {
                showMessage(`${type.charAt(0).toUpperCase() + type.slice(1)} already completed today!`, 'warning');
                return;
            }

            appData.homework[type].completed += 1;
            appData.homework[type].status = 'completed';
            
            updateHomeworkProgress();
            updateStatusDots();
            updateProgressFromHomework(); // Auto-sync to progress tab
            showMessage(`${type.charAt(0).toUpperCase() + type.slice(1)} marked as complete for today!`, 'success');

            const button = document.querySelector(`#homework-${type} button`);
            button.textContent = 'Completed ‚úì';
            button.className = 'btn btn-small btn-secondary';
            button.disabled = true;

            // Check if all homework is done
            const allCompleted = Object.values(appData.homework).every(h => h.status === 'completed');
            if (allCompleted) {
                document.getElementById('workoutsBadge').classList.remove('show');
                showMessage('All daily goals completed! Excellent work! üéâ', 'success');
                
                // Sync mobile badges
                if (typeof syncMobileBadges === 'function') {
                    syncMobileBadges();
                }
            }
        }

        // Auto-sync homework to progress tab
        function updateProgressFromHomework() {
            // Update weekly steps display
            const stepsCompleted = appData.homework.steps.completed;
            document.getElementById('weeklySteps').textContent = `${stepsCompleted}/7`;
            
            // Update progress change
            const stepsChangeEl = document.getElementById('stepsChange');
            if (stepsCompleted >= 6) {
                stepsChangeEl.textContent = 'Auto-tracked ‚úì';
                stepsChangeEl.className = 'progress-change positive';
            } else if (stepsCompleted >= 4) {
                stepsChangeEl.textContent = 'Good progress';
                stepsChangeEl.className = 'progress-change neutral';
            } else {
                stepsChangeEl.textContent = 'Needs attention';
                stepsChangeEl.className = 'progress-change negative';
            }

            // Update average weekly mood
            const avgMood = appData.weeklyMoodData.reduce((a, b) => a + b, 0) / appData.weeklyMoodData.length;
            document.getElementById('currentMood').textContent = getMoodEmoji(avgMood);
            document.getElementById('moodChange').textContent = `${avgMood.toFixed(1)}/10 this week`;
        }

        function getMoodEmoji(score) {
            if (score >= 8) return 'üòä';
            if (score >= 6) return 'üòê';
            if (score >= 4) return 'üòî';
            return 'üò¥';
        }

        function updateTodayDate() {
            const today = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            document.getElementById('todayDate').textContent = today.toLocaleDateString('en-US', options);
        }

        function checkTodaysWorkout() {
            const today = scheduleData.today;
            const todaysWorkout = scheduleData.workouts[today];

            if (todaysWorkout) {
                showTodaysWorkout(todaysWorkout);
                document.getElementById('workoutLayout').classList.remove('no-session');
            } else {
                hideTodaysWorkout();
                document.getElementById('workoutLayout').classList.add('no-session');
            }
        }

        function showTodaysWorkout(workout) {
            document.getElementById('scheduledWorkoutSection').classList.remove('hidden');
            document.getElementById('scheduledWorkoutDate').textContent = `Today, ${scheduleData.today}`;
            document.getElementById('scheduledWorkoutType').textContent = workout.type;
            document.getElementById('scheduledWorkoutDetails').innerHTML = `
                <strong>Time:</strong> ${workout.time}<br>
                <strong>Focus:</strong> ${workout.focus}<br>
                <strong>Location:</strong> Gym - Studio A
            `;

            document.getElementById('workoutTypeFull').textContent = workout.type + ' Strength';
            document.getElementById('workoutTimeFull').textContent = workout.time;
            document.getElementById('workoutFocusFull').textContent = `Focus: ${workout.focus}`;
        }

        function hideTodaysWorkout() {
            document.getElementById('scheduledWorkoutSection').classList.add('hidden');
            document.getElementById('todaysWorkoutPanel').classList.add('hidden');
        }

        function showTodaysWorkoutPanel() {
            document.getElementById('todaysWorkoutPanel').classList.remove('hidden');
        }

        function markWorkoutComplete() {
            showMessage('Workout marked as complete! Great job! üèãÔ∏è‚Äç‚ôÄÔ∏è', 'success');
            document.getElementById('todaysWorkoutPanel').classList.add('hidden');
            
            const currentWorkouts = parseInt(document.getElementById('totalWorkouts').textContent);
            document.getElementById('totalWorkouts').textContent = currentWorkouts + 1;
            
            // Update streak
            const currentStreak = parseInt(document.getElementById('workoutStreak').textContent);
            document.getElementById('workoutStreak').textContent = currentStreak + 1;
        }

        // Enhanced meal plan functions with Quick Add
        function switchMealTab(mealType) {
            console.log('Switching to meal tab:', mealType);
            
            document.querySelectorAll('.meal-options').forEach(option => {
                option.classList.remove('active');
            });
            
            document.querySelectorAll('.meal-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            const targetOptions = document.getElementById(`${mealType}Options`);
            if (targetOptions) {
                targetOptions.classList.add('active');
            }
            
            const activeTab = document.querySelector(`[data-meal="${mealType}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
        }

        // Quick Add Meal functionality
        function quickAddMeal(button, event) {
            event.stopPropagation(); // Prevent triggering favorite toggle
            
            const mealOption = button.closest('.meal-option');
            const mealData = JSON.parse(mealOption.getAttribute('data-meal'));
            
            // Add to today's nutrition
            addMealToToday(mealData);
            
            // Visual feedback
            button.textContent = 'Added ‚úì';
            button.style.background = '#4CAF50';
            setTimeout(() => {
                button.textContent = 'Quick Add';
                button.style.background = '#FFC107';
            }, 2000);
            
            showMessage(`${mealData.name} added to today's nutrition!`, 'success');
        }

        function addMealToToday(mealData) {
            // Update daily nutrition totals
            appData.dailyNutrition.calories += mealData.calories;
            appData.dailyNutrition.protein += mealData.protein;
            appData.dailyNutrition.carbs += mealData.carbs;
            appData.dailyNutrition.fats += mealData.fats;
            
            // Create meal log entry
            const mealLog = {
                id: Date.now(),
                date: new Date().toISOString(),
                mealType: getCurrentMealType(),
                description: mealData.name,
                calories: mealData.calories,
                protein: mealData.protein,
                carbs: mealData.carbs,
                fats: mealData.fats
            };
            
            appData.nutritionLogs.push(mealLog);
            
            // Update displays
            updateDailyNutrition();
            loadTodayMeals();
        }

        function getCurrentMealType() {
            const hour = new Date().getHours();
            if (hour < 11) return 'breakfast';
            if (hour < 15) return 'lunch';
            if (hour < 18) return 'snack';
            return 'dinner';
        }

        function toggleFavorite(element) {
            // Don't toggle if click was on Quick Add button
            if (event.target.classList.contains('btn-quick-add')) {
                return;
            }
            
            const star = element.querySelector('.favorite-star');
            const mealName = element.querySelector('.meal-name').textContent.trim();
            
            if (star.textContent === '‚òÜ') {
                star.textContent = '‚òÖ';
                element.classList.add('favorite');
                appData.favorites.push(mealName);
                
                // Auto-add favorited meal to today's nutrition
                const mealData = JSON.parse(element.getAttribute('data-meal'));
                addMealToToday(mealData);
                
                showMessage(`${mealName} favorited and added to today's nutrition!`, 'success');
            } else {
                star.textContent = '‚òÜ';
                element.classList.remove('favorite');
                appData.favorites = appData.favorites.filter(fav => fav !== mealName);
                showMessage(`${mealName} removed from favorites.`, 'info');
            }
        }

        // Meal action functions
        function copyMealToTomorrow(button) {
            const mealLog = button.closest('.meal-log');
            const mealName = mealLog.querySelector('.meal-content').textContent;
            
            showMessage(`${mealName} copied to tomorrow's meal plan!`, 'success');
            
            button.textContent = 'Copied ‚úì';
            button.style.background = '#4CAF50';
            setTimeout(() => {
                button.textContent = 'Copy ‚Üí';
                button.style.background = '#2196F3';
            }, 2000);
        }

        function repeatMeal(button) {
            const mealLog = button.closest('.meal-log');
            const mealName = mealLog.querySelector('.meal-content').textContent;
            const macros = mealLog.querySelector('.meal-macros').textContent;
            
            // Extract macro values (simplified for demo)
            const calories = parseInt(macros.match(/(\d+) cal/)[1]);
            const protein = parseInt(macros.match(/(\d+)g protein/)[1]);
            const carbs = parseInt(macros.match(/(\d+)g carbs/)[1]);
            const fats = parseInt(macros.match(/(\d+)g fat/)[1]);
            
            // Add to today's totals
            appData.dailyNutrition.calories += calories;
            appData.dailyNutrition.protein += protein;
            appData.dailyNutrition.carbs += carbs;
            appData.dailyNutrition.fats += fats;
            
            updateDailyNutrition();
            showMessage(`${mealName} repeated and added to today's nutrition!`, 'success');
            
            button.textContent = 'Repeated ‚úì';
            button.style.background = '#4CAF50';
            setTimeout(() => {
                button.textContent = 'Repeat';
                button.style.background = '#9C27B0';
            }, 2000);
        }

        // NEW - Delete meal functionality
        function deleteMeal(button) {
            if (confirm('Are you sure you want to delete this meal entry?')) {
                const mealLog = button.closest('.meal-log');
                const mealName = mealLog.querySelector('.meal-content').textContent;
                const macros = mealLog.querySelector('.meal-macros').textContent;
                
                // Extract macro values to subtract from daily totals
                const calories = parseInt(macros.match(/(\d+) cal/)[1]);
                const protein = parseInt(macros.match(/(\d+)g protein/)[1]);
                const carbs = parseInt(macros.match(/(\d+)g carbs/)[1]);
                const fats = parseInt(macros.match(/(\d+)g fat/)[1]);
                
                // Subtract from daily totals
                appData.dailyNutrition.calories = Math.max(0, appData.dailyNutrition.calories - calories);
                appData.dailyNutrition.protein = Math.max(0, appData.dailyNutrition.protein - protein);
                appData.dailyNutrition.carbs = Math.max(0, appData.dailyNutrition.carbs - carbs);
                appData.dailyNutrition.fats = Math.max(0, appData.dailyNutrition.fats - fats);
                
                // Remove from nutrition logs
                const mealId = mealLog.dataset.mealId;
                if (mealId) {
                    appData.nutritionLogs = appData.nutritionLogs.filter(log => log.id !== parseInt(mealId));
                }
                
                // Remove visual element
                mealLog.remove();
                
                // Update displays
                updateDailyNutrition();
                showMessage(`${mealName} deleted from today's nutrition.`, 'info');
            }
        }

        function updateQuickStats() {
            if (!clientData) return;
            
            document.getElementById('sessionsRemaining').textContent = clientData.sessionsRemaining || 8;
            document.getElementById('workoutStreak').textContent = clientData.progress?.streak || 12;
            document.getElementById('totalWorkouts').textContent = clientData.progress?.workouts || 47;
            document.getElementById('monthlyGrade').textContent = calculateMonthlyGrade();
        }

        function calculateMonthlyGrade() {
            const grades = ['A+', 'A', 'A-', 'B+', 'B', 'B-', 'C+', 'C'];
            return grades[Math.floor(Math.random() * grades.length)];
        }

        function switchTab(tabName) {
            console.log('Switching to tab:', tabName);
            
            // Hide all tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            const targetTab = document.getElementById(`${tabName}Tab`);
            if (targetTab) {
                targetTab.classList.add('active');
                console.log('Activated tab:', tabName);
            } else {
                console.error('Tab not found:', `${tabName}Tab`);
            }
            
            // Add active class to clicked tab
            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // Load tab-specific data
            loadTabData(tabName);
        }

        function loadTabData(tabName) {
            switch(tabName) {
                case 'progress':
                    loadProgressData();
                    break;
                case 'workouts':
                    loadHomeworkAssignments();
                    checkTodaysWorkout();
                    updateStatusDots();
                    break;
                case 'nutrition':
                    loadNutritionData();
                    initializeProgressRings();
                    break;
                case 'calendar':
                    loadWeeklyCalendar();
                    break;
                case 'messages':
                    loadMessages();
                    break;
            }
        }

        function loadProgressData() {
            if (!clientData) return;
            
            // Show last week vs current weight comparison
            const currentWeight = clientData.progress?.weight?.length > 0 ? 
                clientData.progress.weight[clientData.progress.weight.length - 1] : 185.2;
            
            document.getElementById('currentWeight').textContent = currentWeight || 'Not set';
            
            // Update progress with homework data
            updateProgressFromHomework();
            
            // Update change indicators with last week comparison
            updateProgressChanges();
            
            // Load progress photos
            loadProgressPhotos();
        }

        function updateProgressChanges() {
            if (!clientData || !clientData.progress?.weight || clientData.progress.weight.length < 2) {
                document.getElementById('weightChange').textContent = 'No previous data';
                document.getElementById('weightChange').className = 'progress-change neutral';
                return;
            }
            
            const weights = clientData.progress.weight;
            const currentWeight = weights[weights.length - 1];
            const lastWeekWeight = appData.lastWeekWeight;
            const weightChange = currentWeight - lastWeekWeight;
            const weightChangeEl = document.getElementById('weightChange');
            
            if (weightChange > 0) {
                weightChangeEl.textContent = `+${weightChange.toFixed(1)} vs last week`;
                weightChangeEl.className = 'progress-change negative';
            } else if (weightChange < 0) {
                weightChangeEl.textContent = `${weightChange.toFixed(1)} vs last week`;
                weightChangeEl.className = 'progress-change positive';
            } else {
                weightChangeEl.textContent = 'No change vs last week';
                weightChangeEl.className = 'progress-change neutral';
            }
        }

        function loadProgressPhotos() {
            const photosContainer = document.getElementById('progressPhotos');
            
            if (appData.photos.length === 0) {
                photosContainer.innerHTML = `
                    <div class="photo-item">
                        <div class="photo-placeholder">üì∑</div>
                        <div class="photo-date">Click "Add Photo" to get started</div>
                    </div>
                `;
                return;
            }
            
            // Before/after slider if 2+ photos
            if (appData.photos.length >= 2) {
                photosContainer.innerHTML = `
                    <div class="photo-slider">
                        <div class="photo-slides" id="photoSlides">
                            ${appData.photos.map((photo, index) => `
                                <div class="photo-slide">
                                    <img src="${photo.data}" alt="Progress photo ${index + 1}">
                                    <div class="photo-date">${new Date(photo.date).toLocaleDateString()}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="photo-controls">
                            ${appData.photos.map((_, index) => `
                                <div class="photo-control ${index === 0 ? 'active' : ''}" onclick="showPhotoSlide(${index})"></div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else {
                photosContainer.innerHTML = appData.photos.map(photo => `
                    <div class="photo-item">
                        <img src="${photo.data}" alt="Progress photo" style="width: 100%; height: 250px; object-fit: cover;">
                        <div class="photo-date">${new Date(photo.date).toLocaleDateString()}</div>
                    </div>
                `).join('');
            }
        }

        // Photo slider controls
        function showPhotoSlide(index) {
            const slides = document.getElementById('photoSlides');
            const controls = document.querySelectorAll('.photo-control');
            
            slides.style.transform = `translateX(-${index * 100}%)`;
            
            controls.forEach((control, i) => {
                control.classList.toggle('active', i === index);
            });
        }

        function loadNutritionData() {
            updateDailyNutrition();
            loadTodayMeals();
        }

        function updateDailyNutrition() {
            const nutrition = appData.dailyNutrition;
            
            document.getElementById('todayCalories').textContent = nutrition.calories;
            document.getElementById('todayProtein').textContent = `${nutrition.protein}g`;
            document.getElementById('todayCarbs').textContent = `${nutrition.carbs}g`;
            document.getElementById('todayFats').textContent = `${nutrition.fats}g`;
            
            // Update progress rings with animation
            const caloriesPercent = Math.min((nutrition.calories / nutrition.targets.calories) * 100, 100);
            const proteinPercent = Math.min((nutrition.protein / nutrition.targets.protein) * 100, 100);
            const carbsPercent = Math.min((nutrition.carbs / nutrition.targets.carbs) * 100, 100);
            const fatsPercent = Math.min((nutrition.fats / nutrition.targets.fats) * 100, 100);
            
            setTimeout(() => {
                updateProgressRing('caloriesRing', caloriesPercent);
                updateProgressRing('proteinRing', proteinPercent);
                updateProgressRing('carbsRing', carbsPercent);
                updateProgressRing('fatsRing', fatsPercent);
            }, 300);
        }

        function loadTodayMeals() {
            const todayMeals = document.getElementById('todayMeals');
            
            if (appData.nutritionLogs.length === 0) {
                // Sample meals are already shown in HTML
                return;
            }
            
            // Filter today's meals
            const today = new Date().toISOString().split('T')[0];
            const todayMealLogs = appData.nutritionLogs.filter(log => 
                log.date.startsWith(today)
            );
            
            if (todayMealLogs.length > 0) {
                todayMeals.innerHTML = todayMealLogs.map(meal => `
                    <div class="meal-log" data-meal-id="${meal.id}">
                        <div class="meal-header">
                            <span class="meal-type">${meal.mealType}</span>
                            <span class="meal-time">${new Date(meal.date).toLocaleTimeString()}</span>
                        </div>
                        <div class="meal-content">${meal.description}</div>
                        <div class="meal-macros">
                            <span>${meal.calories} cal</span>
                            <span>${meal.protein}g protein</span>
                            <span>${meal.carbs}g carbs</span>
                            <span>${meal.fats}g fat</span>
                        </div>
                        <div class="meal-actions">
                            <button class="btn-copy" onclick="copyMealToTomorrow(this)">Copy ‚Üí</button>
                            <button class="btn-repeat" onclick="repeatMeal(this)">Repeat</button>
                            <button class="btn-delete" onclick="deleteMeal(this)">Delete</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function loadWeeklyCalendar() {
            // Already loaded with sample data in HTML
        }

        function loadMessages() {
            const messageThread = document.getElementById('messageThread');
            
            if (appData.messages.length === 0) {
                // Sample messages are already shown in HTML
                return;
            }
            
            messageThread.innerHTML = appData.messages.slice(-10).map(msg => `
                <div class="message-item ${msg.sender === currentUser.username ? 'message-sent' : 'message-received'}">
                    <div class="meal-content">${msg.content}</div>
                    <div class="message-time">${msg.sender === currentUser.username ? 'You' : 'Coach'} ‚Ä¢ ${formatTime(msg.timestamp)}</div>
                </div>
            `).join('');
            
            // Scroll to bottom
            messageThread.scrollTop = messageThread.scrollHeight;
        }

        function formatTime(timestamp) {
            const date = new Date(timestamp);
            const options = {
                month: 'short',
                day: 'numeric',
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            };
            return date.toLocaleString('en-US', options);
        }

        // Modal Functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function showProgressModal() {
            showModal('progressModal');
        }

        function showNutritionModal() {
            showModal('nutritionModal');
        }

        function showPhotoModal() {
            showModal('photoModal');
        }

        function showTodaysWorkout() {
            showTodaysWorkoutPanel();
        }

        // Quick Entry Functions
        function setSteps(value) {
            document.getElementById('progressSteps').value = value;
        }

        function setCalories(value) {
            document.getElementById('progressCalories').value = value;
        }

        function setMood(value) {
            document.getElementById('progressMood').value = value;
        }

        function setRPE(value) {
            document.getElementById('progressRPE').value = value;
        }

        function updateLastWeight() {
            if (clientData && clientData.progress?.weight?.length > 0) {
                const lastWeight = appData.lastWeekWeight;
                document.getElementById('lastWeight').textContent = lastWeight;
            }
        }

        // Form Handlers
        function handleProgressUpdate(e) {
            e.preventDefault();
            
            const progressData = {
                date: new Date().toISOString(),
                weight: parseFloat(document.getElementById('progressWeight').value),
                steps: parseInt(document.getElementById('progressSteps').value),
                calories: parseInt(document.getElementById('progressCalories').value),
                mood: parseInt(document.getElementById('progressMood').value),
                rpe: parseInt(document.getElementById('progressRPE').value),
                pain: document.getElementById('progressPain').value
            };

            // Update client data in memory only
            if (clientData) {
                if (progressData.weight) {
                    if (!clientData.progress) clientData.progress = {};
                    if (!clientData.progress.weight) clientData.progress.weight = [];
                    clientData.progress.weight.push(progressData.weight);
                }
                
                if (!clientData.progressHistory) {
                    clientData.progressHistory = [];
                }
                clientData.progressHistory.push(progressData);
            }

            appData.progressData.push(progressData);
            
            // Update weekly mood data if provided
            if (progressData.mood) {
                appData.weeklyMoodData[6] = progressData.mood; // Update last day
            }
            
            closeModal('progressModal');
            loadProgressData();
            updateQuickStats();
            showMessage('Progress updated successfully!', 'success');
            
            // Remove progress badge
            document.getElementById('progressBadge').classList.remove('show');
            
            // Sync mobile badges
            if (typeof syncMobileBadges === 'function') {
                syncMobileBadges();
            }
            
            // Clear form
            document.getElementById('progressForm').reset();
        }

        function handleNutritionLog(e) {
            e.preventDefault();
            
            const nutritionData = {
                id: Date.now(),
                date: new Date().toISOString(),
                mealType: document.getElementById('mealType').value,
                description: document.getElementById('foodDescription').value,
                calories: parseInt(document.getElementById('foodCalories').value),
                protein: parseInt(document.getElementById('foodProtein').value) || 0,
                carbs: parseInt(document.getElementById('foodCarbs').value) || 0,
                fats: parseInt(document.getElementById('foodFats').value) || 0
            };

            // Add to daily totals
            appData.dailyNutrition.calories += nutritionData.calories;
            appData.dailyNutrition.protein += nutritionData.protein;
            appData.dailyNutrition.carbs += nutritionData.carbs;
            appData.dailyNutrition.fats += nutritionData.fats;

            appData.nutritionLogs.push(nutritionData);
            
            // Update client data in memory only
            if (clientData) {
                if (!clientData.nutrition) {
                    clientData.nutrition = [];
                }
                clientData.nutrition.push(nutritionData);
            }

            closeModal('nutritionModal');
            loadNutritionData();
            showMessage('Food logged successfully!', 'success');
            
            // Clear form
            document.getElementById('nutritionForm').reset();
        }

        function uploadPhoto() {
            const photoInput = document.getElementById('photoInput');
            const photoNotes = document.getElementById('photoNotes').value;
            
            if (!photoInput.files[0]) {
                showMessage('Please select a photo first.', 'error');
                return;
            }
            
            const file = photoInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const photoData = {
                    id: Date.now(),
                    date: new Date().toISOString(),
                    data: e.target.result,
                    notes: photoNotes
                };
                
                appData.photos.push(photoData);
                
                // Update client data in memory only
                if (clientData) {
                    if (!clientData.progress) clientData.progress = {};
                    if (!clientData.progress.photos) {
                        clientData.progress.photos = [];
                    }
                    clientData.progress.photos.push(photoData);
                }
                
                closeModal('photoModal');
                loadProgressPhotos();
                showMessage('Progress photo added successfully!', 'success');
                
                // Clear form
                photoInput.value = '';
                document.getElementById('photoNotes').value = '';
            };
            
            reader.readAsDataURL(file);
        }

        function sendMessage() {
            const messageInput = document.getElementById('newMessage');
            const content = messageInput.value.trim();
            
            if (!content) {
                showMessage('Please enter a message.', 'error');
                return;
            }
            
            const message = {
                id: Date.now(),
                sender: currentUser.username,
                recipient: 'coach',
                content: content,
                timestamp: new Date().toISOString(),
                type: 'message'
            };
            
            appData.messages.push(message);
            
            messageInput.value = '';
            loadMessages();
            showMessage('Message sent to your coach!', 'success');
        }

        // Utility Functions
        function showMessage(message, type = 'info') {
            const messageContainer = document.getElementById('messageContainer');
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = message;
            
            messageContainer.appendChild(messageDiv);
            
            setTimeout(() => {
                if (messageDiv.parentElement) {
                    messageDiv.remove();
                }
            }, 5000);
        }

        function logout() {
            showMessage('Logging out...', 'info');
            
            // Clear local storage session data
            localStorage.removeItem('currentUser');
            localStorage.removeItem('domainAthleticsData');
            
            // Handle Firebase signout if available
            if (window.firebaseAuth && window.firebaseAuth.currentUser) {
                window.firebaseAuth.signOut().then(() => {
                    console.log('Firebase user signed out');
                }).catch((error) => {
                    console.log('Firebase signout error:', error);
                });
            }
            
            // Clear any other session data
            sessionStorage.clear();
            
            console.log('Session cleared, redirecting to login...');
            
            // Redirect to login page after brief delay for user feedback
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1000);
        }

        // Periodic Checks
        function initializePeriodicChecks() {
            // Update nutrition summary every 5 minutes
            setInterval(updateDailyNutrition, 5 * 60 * 1000);
            
            // Check for new messages every 30 seconds
            setInterval(loadMessages, 30 * 1000);
            
            // Update stats every minute
            setInterval(updateQuickStats, 60 * 1000);
            
            // Weekly reminder check
            setTimeout(checkForWeeklyReminder, 3000);

            // Auto-mark homework as missed at end of day
            setTimeout(checkHomeworkDeadlines, 24 * 60 * 60 * 1000);
        }

        function checkHomeworkDeadlines() {
            Object.keys(appData.homework).forEach(type => {
                if (appData.homework[type].status === 'pending') {
                    appData.homework[type].status = 'missed';
                    updateHomeworkStatus(type, 'missed');
                    updateStatusDots();
                }
            });
            
            // Reset for next day
            setTimeout(() => {
                Object.keys(appData.homework).forEach(type => {
                    appData.homework[type].status = 'pending';
                    updateHomeworkStatus(type, 'pending');
                    updateStatusDots();
                    
                    // Re-enable buttons
                    const button = document.querySelector(`#homework-${type} button`);
                    if (button && type !== 'steps') {
                        button.textContent = 'Completed Today';
                        button.className = 'btn btn-small btn-success';
                        button.disabled = false;
                    } else if (type === 'steps') {
                        button.textContent = 'Hit Goal!';
                        button.className = 'btn btn-small btn-success';
                        button.disabled = false;
                    }
                });
                
                // Show notification badges for new day
                showNotificationBadges();
            }, 1000);
        }

        // Session Management
        function checkSessionValidity() {
            console.log('Session check - demo mode active');
        }

        // Weekly Reminder Response
        function checkForWeeklyReminder() {
            const today = new Date();
            const options = { weekday: 'long' };
            const dayName = today.toLocaleDateString('en-US', options).toLowerCase();
            
            if (dayName === 'friday') {
                showMessage('üìÖ Weekly check-in reminder! Please update your progress data.', 'info');
                document.getElementById('progressBadge').classList.add('show');
            }
        }

        // Data backup
        function performClientBackup() {
            const clientBackup = {
                timestamp: new Date().toISOString(),
                clientData: clientData,
                progressData: appData.progressData,
                nutritionLogs: appData.nutritionLogs,
                photos: appData.photos,
                homework: appData.homework,
                favorites: appData.favorites,
                dailyNutrition: appData.dailyNutrition,
                weeklyMoodData: appData.weeklyMoodData
            };

            console.log('Client data backup performed (memory only)');
        }

        // Check session validity every 30 minutes
        setInterval(checkSessionValidity, 30 * 60 * 1000);

        // Perform backup every 2 hours
        setInterval(performClientBackup, 2 * 60 * 60 * 1000);

        // Error Handling
        window.addEventListener('error', function(e) {
            console.error('Application error:', e.error);
            showMessage('An error occurred. Please refresh the page if issues persist.', 'error');
        });

        console.log('Domain Athletics Client Dashboard - Ready with all features');
        
        // Welcome message
        setTimeout(() => {
            if (!clientData || !clientData.progress || !clientData.progress.workouts || clientData.progress.workouts === 0) {
                showMessage('Welcome to Domain Athletics! All features are active for demo.', 'info');
            }
        }, 2000);
    </script>
</body>
</html>